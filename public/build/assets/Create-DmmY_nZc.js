import{u as I,r as x,a as A,b as L,j as e,H as _,o as q,p as b,q as S,s as z,L as B}from"./app-C-l_7ese.js";import{A as D}from"./AdminLayout-5bDOgTkV.js";import{I as c,T as w}from"./InputError-0B2gnabr.js";import{P as N}from"./PasswordInput-DPqsZfDd.js";import{P as M}from"./PrimaryButton-SYpOhc65.js";import{I as n}from"./InputLabel-C0AzegN4.js";function G({roles:h}){const{data:t,setData:l,errors:a,post:y,processing:f,reset:k}=I({name:"",email:"",password:"",password_confirmation:"",foto:null,roles:[]}),[i,p]=x.useState(null),u=x.useRef(null),{success:g,error:m}=A(),{props:C}=L(),d=C.flash||{},j=Array.isArray(t.roles)?t.roles:[];x.useEffect(()=>{d.success&&g(d.success),d.error&&m(d.error)},[d]),x.useEffect(()=>()=>{i&&URL.revokeObjectURL(i)},[i]);const F=r=>{const s=r.target.files[0];if(s){if(!s.type.startsWith("image/")){m("Please select an image file");return}if(s.size>2*1024*1024){m("Image size must be less than 2MB");return}l("foto",s);const o=URL.createObjectURL(s);p(o)}},P=()=>{l("foto",null),p(null),u.current&&(u.current.value="")},U=r=>{l("roles",s=>{const o=Array.isArray(s)?s:[];return o.includes(r)?o.filter(E=>E!==r):[...o,r]})},R=r=>{r.preventDefault();const s={...t,roles:j};y(route("admin.users.store"),{data:s,onSuccess:()=>{g("User created successfully!"),k(),p(null)},onError:o=>{m("Failed to create user. Please check the form.")},forceFormData:!0})},v=()=>{u.current?.click()};return e.jsxs(D,{title:"Create User",children:[e.jsx(_,{title:"Create User"}),e.jsx("div",{className:"mx-auto px-1 lg:px-4 lg:pt-2",children:e.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl shadow-card p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Create New User"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-2",children:"Add a new user to your system with appropriate roles and permissions."})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"foto",value:"Profile Photo"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-dashed border-neutral-300 dark:border-neutral-600 bg-neutral-50 dark:bg-neutral-700 flex items-center justify-center cursor-pointer hover:border-neutral-400 dark:hover:border-neutral-500 transition-colors",onClick:v,children:i?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i,alt:"Preview",className:"w-full h-full rounded-full object-cover"}),e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),P()},className:"absolute -top-2 -right-2 bg-error-500 text-white rounded-full p-1 hover:bg-error-600 transition-colors",children:e.jsx(q,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"w-8 h-8 text-neutral-400 mx-auto mb-1"}),e.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Upload"})]})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-2",children:"Upload a profile photo (max 2MB)"}),e.jsxs("button",{type:"button",onClick:v,className:"inline-flex items-center px-4 py-2 bg-neutral-100 dark:bg-neutral-700 border border-neutral-300 dark:border-neutral-600 rounded-md font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-neutral-800 text-sm",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Select Photo"]})]})]}),e.jsx("input",{ref:u,type:"file",id:"foto",name:"foto",accept:"image/*",onChange:F,className:"hidden"}),e.jsx(c,{message:a.foto})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"name",value:"Full Name",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{id:"name",type:"text",value:t.name,onChange:r=>l("name",r.target.value),error:a.name,placeholder:"Enter full name",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(S,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(c,{message:a.name})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",value:"Email Address",required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{id:"email",type:"email",value:t.email,onChange:r=>l("email",r.target.value),error:a.email,placeholder:"Enter email address",className:"pl-10"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(z,{className:"h-5 w-5 text-primary-400"})})]}),e.jsx(c,{message:a.email})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"roles",value:"User Roles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-2",children:h&&h.map(r=>e.jsxs("label",{className:"flex items-center p-3 border border-neutral-300 dark:border-neutral-600 rounded-lg cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors",children:[e.jsx("input",{type:"checkbox",value:r,checked:j.includes(r),onChange:()=>U(r),className:"rounded border-neutral-300 text-primary-600 shadow-sm focus:ring-primary-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-neutral-700 dark:text-neutral-300",children:r})]},r))}),e.jsx(c,{message:a.roles})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"password",value:"Password",required:!0}),e.jsx(N,{id:"password",value:t.password,onChange:r=>l("password",r.target.value),error:a.password,placeholder:"Create password"}),e.jsx(c,{message:a.password})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"password_confirmation",value:"Confirm Password",required:!0}),e.jsx(N,{id:"password_confirmation",value:t.password_confirmation,onChange:r=>l("password_confirmation",r.target.value),placeholder:"Confirm password"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(B,{href:route("admin.users.index"),className:"inline-flex items-center justify-center px-6 py-3 border border-neutral-300 rounded-lg text-neutral-700 hover:bg-neutral-50 dark:border-neutral-600 dark:text-neutral-300 dark:hover:bg-neutral-700 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:f,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 focus:ring-primary-500",children:f?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create User"})]})]})]})})]})}export{G as default};
